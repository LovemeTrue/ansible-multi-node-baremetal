apiVersion: apps/v1
kind: Deployment
metadata:
  name: hubble-ui
  namespace: kube-system
  uid: ad20e9fd-0f1b-4d3e-b272-98835ca5e103
  resourceVersion: '115739'
  generation: 1
  creationTimestamp: '2025-07-29T06:12:26Z'
  labels:
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: hubble-ui
    app.kubernetes.io/part-of: cilium
    k8s-app: hubble-ui
  annotations:
    deployment.kubernetes.io/revision: '1'
    meta.helm.sh/release-name: cilium
    meta.helm.sh/release-namespace: kube-system
  selfLink: /apis/apps/v1/namespaces/kube-system/deployments/hubble-ui
status:
  observedGeneration: 1
  replicas: 1
  updatedReplicas: 1
  readyReplicas: 1
  availableReplicas: 1
  conditions:
    - type: Available
      status: 'True'
      lastUpdateTime: '2025-07-29T06:12:26Z'
      lastTransitionTime: '2025-07-29T06:12:26Z'
      reason: MinimumReplicasAvailable
      message: Deployment has minimum availability.
    - type: Progressing
      status: 'True'
      lastUpdateTime: '2025-07-29T06:12:42Z'
      lastTransitionTime: '2025-07-29T06:12:26Z'
      reason: NewReplicaSetAvailable
      message: ReplicaSet "hubble-ui-76d4965bb6" has successfully progressed.
spec:
  replicas: 1
  selector:
    matchLabels:
      k8s-app: hubble-ui
  template:
    metadata:
      creationTimestamp: null
      labels:
        app.kubernetes.io/name: hubble-ui
        app.kubernetes.io/part-of: cilium
        k8s-app: hubble-ui
    spec:
      volumes:
        - name: hubble-ui-nginx-conf
          configMap:
            name: hubble-ui-nginx
            defaultMode: 420
        - name: tmp-dir
          emptyDir: {}
      containers:
        - name: frontend
          image: >-
            quay.io/cilium/hubble-ui:v0.13.2@sha256:9e37c1296b802830834cc87342a9182ccbb71ffebb711971e849221bd9d59392
          ports:
            - name: http
              containerPort: 8081
              protocol: TCP
          resources: {}
          volumeMounts:
            - name: hubble-ui-nginx-conf
              mountPath: /etc/nginx/conf.d/default.conf
              subPath: nginx.conf
            - name: tmp-dir
              mountPath: /tmp
          livenessProbe:
            httpGet:
              path: /healthz
              port: 8081
              scheme: HTTP
            timeoutSeconds: 1
            periodSeconds: 10
            successThreshold: 1
            failureThreshold: 3
          readinessProbe:
            httpGet:
              path: /
              port: 8081
              scheme: HTTP
            timeoutSeconds: 1
            periodSeconds: 10
            successThreshold: 1
            failureThreshold: 3
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: FallbackToLogsOnError
          imagePullPolicy: IfNotPresent
        - name: backend
          image: >-
            quay.io/cilium/hubble-ui-backend:v0.13.2@sha256:a034b7e98e6ea796ed26df8f4e71f83fc16465a19d166eff67a03b822c0bfa15
          ports:
            - name: grpc
              containerPort: 8090
              protocol: TCP
          env:
            - name: EVENTS_SERVER_PORT
              value: '8090'
            - name: FLOWS_API_ADDR
              value: hubble-relay:80
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: FallbackToLogsOnError
          imagePullPolicy: IfNotPresent
      restartPolicy: Always
      terminationGracePeriodSeconds: 30
      dnsPolicy: ClusterFirst
      nodeSelector:
        kubernetes.io/os: linux
      serviceAccountName: hubble-ui
      serviceAccount: hubble-ui
      automountServiceAccountToken: true
      securityContext:
        runAsUser: 1001
        runAsGroup: 1001
        fsGroup: 1001
      schedulerName: default-scheduler
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1
      maxSurge: 25%
  revisionHistoryLimit: 10
  progressDeadlineSeconds: 600
